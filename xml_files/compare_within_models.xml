<tool id="pancancer_compare_within_models" name="PanCancer compare within models" version="@VERSION@">
    <description>compare within models</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="stdio"/>
    <version_command><![CDATA['compare_within_models.R' --version 2>&1 | grep PAPAA]]></version_command>
    <command><![CDATA[
        mkdir 'classifier' &&
        ln -s '${pancan_summary}' 'classifier/classifier_summary.txt' &&
        ln -s '${pancan_classifier_coefficients}' 'classifier/classifier_coefficients.tsv' &&
        #for $within_summary in $alt_gene:
            mkdir -p 'classifier/${within_summary.element_identifier}' &&
            ln -s '${within_summary}' 'classifier/${within_summary.element_identifier}/classifier_summary.txt' &&
        #end for
        #for $within_coefficient in $alt_gene_classifier_coefficients:
            mkdir -p 'classifier/${within_coefficient.element_identifier}' &&
            ln -s '${within_coefficient}' 'classifier/${within_coefficient.element_identifier}/classifier_coefficients.tsv' &&
        #end for
        compare_within_models.R
        
        --pancan_summary 'classifier'

        #if $alt_gene:
        --alt_gene 'classifier'
        #end if
        > '${log}'
        ]]>
    </command>
    <inputs>
        <param argument="--pancan_summary" label="pancancer classifier summary" name="pancan_summary" optional="false" type="data" format="txt" help="single classifer_summary.txt"/>
        <param label="pancancer classifier coefficients" name="pancan_classifier_coefficients" optional="false" type="data" format="tabular" help="single classifier_coefficients.tsv"/>
        <param argument="--alt_gene" label="alt_gene classifier summary" name="alt_gene" optional="true" type="data" format="txt" multiple="true" help="multiple classifer_summary.txt"/>
        <param label="alt_gene classifier coefficients" name="alt_gene_classifier_coefficients" optional="true" type="data" format="tabular" multiple="true" help="multiple classifier_coefficients.tsv"/>
    </inputs>
    <outputs>
        <data format="txt" name="log" label="${tool.name} on ${on_string} (Log)" />
        <data format="pdf" name="aupr_comparison" label="${tool.name} on ${on_string} (aupr_comparison.pdf)" from_work_dir="classifier/figures/aupr_comparison.pdf"/>
        <data format="pdf" name="auroc_comparison" label="${tool.name} on ${on_string} (auroc_comparison.pdf)" from_work_dir="classifier/figures/auroc_comparison.pdf"/>
    </outputs>
    <help><![CDATA[

      Pancancer_Aberrant_Pathway_Activity_Analysis scripts/compare_within_models.R:

        --pancan_summary    String of the Directory location of where pan classifier summary is
        --alt_gene          String of the Directory location of classifier summary for alt gene

      Output:
      - Process PanCancer Classifier and within disease/cancertypes summary files and generate AUROC and AUPR comparion files ("auroc_comparison.pdf" and "aupr_comparison.pdf")
      - Process Altgene Classifier summary and altgene within disease/cancertypes summary files and process PanCancer Classifier _altgene_summary file to determine alternative classifier prediction performance on alternative gene generate AUROC and AUPR comparion files ("alt_gene_auroc_comparison.pdf" and "alt_gene_aupr_comparison.pdf") 

        ]]></help>
</tool>